/**
 * 管理员后台界面移动设备专用修复样式
 * 解决在iPhone等移动设备上管理员界面宽度问题
 */

/* 全局媒体查询处理：包括所有常见容器和滚动区域 */
@media (max-width: 768px) {
  /* 最外层容器和滚动容器 */
  .admin-dashboard-container,
  .admin-dashboard-scrollable,
  .admin-dashboard-tabs-content,
  .admin-dashboard {
    width: 100% !important;
    max-width: 100% !important;
    /* 允许内容在必要时滚动，但不强制隐藏 */
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }

  /* 内部容器 */
  .admin-dashboard-container .container,
  .admin-dashboard .container {
    width: 100% !important;
    max-width: 100% !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }

  /* 修复标签内容区宽度，避免100vw */
  .admin-dashboard-tabs-content {
    max-width: 100% !important;
    padding: 0 !important;
  }

  /* 确保main元素宽度正确 */
  main.py-8,
  .admin-dashboard main {
    width: 100% !important;
    max-width: 100% !important;
  }

  /* 恢复多列Grid布局 */
  .admin-dashboard .grid {
    display: grid !important;
    width: 100% !important;
    gap: 1rem !important;
  }

  /* 统计卡片使用自适应列布局 */
  .admin-dashboard .grid.grid-cols-1.md\:grid-cols-3 {
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)) !important;
  }

  /* 导航卡片也使用自适应列布局 */
  .admin-dashboard .grid.grid-cols-1.md\:grid-cols-2 {
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)) !important;
  }

  /* 确保卡片宽度撑满列 */
  .admin-dashboard .card {
    width: 100% !important;
    margin-bottom: 1rem !important;
  }

  /* 标签列表水平滚动 */
  .admin-dashboard [role="tablist"] {
    display: flex !important;
    flex-direction: row !important;
    width: 100% !important;
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
    scrollbar-width: none !important; /* Firefox */
  }

  /* 隐藏标签滚动条 */
  .admin-dashboard [role="tablist"]::-webkit-scrollbar {
    display: none !important;
  }
}

/* 在更小屏幕上强制单列显示 */
@media (max-width: 480px) {
  .admin-dashboard .grid {
    grid-template-columns: 1fr !important;
  }
}

/* 设备特定优化补充，只添加必要的规则 */
.iphone-device .admin-dashboard,
.mobile-device .admin-dashboard {
  /* 确保在移动设备上的最小高度 */
  min-height: 100vh;
}