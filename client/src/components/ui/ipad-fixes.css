/**
 * iPad专用样式修复
 * 解决iPad和高DPI设备上常见的UI布局问题
 */

/* 全局优化 */
html.ipad-device {
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

/* 修复iPad上点击闪烁问题 */
html.ipad-device * {
  -webkit-tap-highlight-color: transparent;
}

/* 修复输入框问题 */
html.ipad-device input,
html.ipad-device textarea,
html.ipad-device select,
html.ipad-device button {
  font-size: 16px !important; /* 防止iOS自动缩放 */
  touch-action: manipulation;
}

/* 修复软键盘弹出时的布局问题 */
html.ipad-device.keyboard-open {
  height: 100% !important;
  overflow: hidden !important;
}

body.keyboard-open {
  height: 100% !important;
  overflow: hidden !important;
}

/* 修复滚动容器 */
html.ipad-device .scroll-container {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  touch-action: pan-y;
  position: relative;
}

/* 修复SVG渲染问题 */
html.ipad-device svg {
  touch-action: manipulation;
  -webkit-user-select: none;
  user-select: none;
  max-width: 100%;
  max-height: 100%;
}

/* 增强页面滚动体验 */
html.ipad-device .page-container {
  height: 100%;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* 修复按钮点击区域 */
html.ipad-device button,
html.ipad-device .button,
html.ipad-device [role="button"] {
  min-height: 44px;
  min-width: 44px;
  padding: 8px 16px;
  touch-action: manipulation;
}

/* 修复图表容器在iPad上的显示 */
html.ipad-device .d3-force-graph-container {
  width: 100% !important;
  height: 100% !important;
  overflow: hidden !important;
  touch-action: manipulation;
}

html.ipad-device .d3-force-graph {
  width: 100% !important;
  height: 100% !important;
  touch-action: manipulation;
}

/* 修复知识图谱专有问题 */
html.ipad-device .knowledge-graph-container {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  overflow: hidden !important;
}

html.ipad-device .knowledge-graph-navigation {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  z-index: 100 !important;
}

/* 修复Admin面板在iPad上的显示 */
html.ipad-device .admin-panel {
  -webkit-overflow-scrolling: touch;
  touch-action: pan-y;
}

html.ipad-device .tabs-container [role="tablist"] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
  overflow-x: auto;
  white-space: nowrap;
}

html.ipad-device .tabs-container [role="tablist"]::-webkit-scrollbar {
  display: none;
}

/* 修复对话框在iPad上的滚动问题 */
html.ipad-device [role="dialog"] {
  max-height: 80vh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* 修复表单在iPad上的显示 */
html.ipad-device form input,
html.ipad-device form textarea,
html.ipad-device form select {
  font-size: 16px !important;
  padding: 12px !important;
}

/* 修复下拉菜单在iPad上的显示 */
html.ipad-device [role="menu"] {
  -webkit-overflow-scrolling: touch;
  overflow-y: auto;
  max-height: 60vh;
}