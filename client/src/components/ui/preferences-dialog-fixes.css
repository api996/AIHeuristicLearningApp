
/*
 * 偏好设置对话框在iPad上的滚动修复 - 优化版本
 * 确保偏好设置对话框在iPad上可以正常显示和交互
 */

/* iPad设备上的偏好设置对话框样式增强 */
.ipad-device [role="dialog"],
.tablet-device [role="dialog"],
.ipad-device .dialog-content,
.tablet-device .dialog-content {
  background-color: rgba(30, 30, 35, 0.85) !important;
  backdrop-filter: blur(15px) !important;
  -webkit-backdrop-filter: blur(15px) !important;
  border-radius: 16px !important;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  z-index: 100000 !important;
  max-width: 85% !important;
  width: auto !important;
  max-height: 80vh !important;
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch !important;
  margin: 0 auto !important;
  position: relative !important;
  transform: translateZ(0) !important; /* 强制硬件加速 */
}

/* 确保对话框内按钮样式正确 */
.ipad-device [role="dialog"] button,
.tablet-device [role="dialog"] button {
  position: relative !important;
  z-index: 10 !important;
  transform: translateZ(0) !important; /* 强制硬件加速 */
  min-height: 38px !important;
  border-radius: 8px !important;
  background-color: rgba(50, 50, 55, 0.7) !important;
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  overflow: hidden !important; /* 确保按钮内的波纹动画不溢出 */
}

/* 对话框内按钮点击反馈 */
.ipad-device [role="dialog"] button:active,
.tablet-device [role="dialog"] button:active {
  transform: scale(0.97) translateZ(0) !important;
  background-color: rgba(60, 60, 65, 0.8) !important;
  transition: all 0.2s ease-out !important;
}

/* 增强对话框按钮的触觉反馈 */
.ipad-device [role="dialog"] button:after,
.tablet-device [role="dialog"] button:after {
  content: "" !important;
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%) !important;
  opacity: 0 !important;
  transform: scale(0.5) !important;
  z-index: -1 !important;
  transition: all 0.3s ease-out !important;
  border-radius: inherit !important;
  pointer-events: none !important;
}

.ipad-device [role="dialog"] button:active:after,
.tablet-device [role="dialog"] button:active:after {
  opacity: 1 !important;
  transform: scale(2) !important;
  animation: dialog-button-ripple 0.4s ease-out !important;
}

@keyframes dialog-button-ripple {
  0% {
    transform: scale(0.5);
    opacity: 0.5;
  }
  100% {
    transform: scale(2.5);
    opacity: 0;
  }
}

/* 确保对话框内容区域正确渲染 */
.ipad-device [role="dialog"] > div,
.tablet-device [role="dialog"] > div {
  background-color: transparent !important;
  border-radius: 12px !important;
  padding: 16px !important;
  position: relative !important;
  z-index: 1 !important;
}

/* 修复对话框内输入控件样式 */
.ipad-device [role="dialog"] input,
.tablet-device [role="dialog"] input,
.ipad-device [role="dialog"] textarea,
.tablet-device [role="dialog"] textarea,
.ipad-device [role="dialog"] select,
.tablet-device [role="dialog"] select {
  -webkit-appearance: none !important;
  appearance: none !important;
  background-color: rgba(20, 20, 25, 0.5) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-radius: 8px !important;
  padding: 10px 12px !important;
  color: rgba(255, 255, 255, 0.9) !important;
  font-size: 15px !important;
  min-height: 42px !important;
  width: 100% !important;
}

/* 确保对话框内部滚动正常 */
.ipad-device .preferences-dialog-content,
.tablet-device .preferences-dialog-content,
.ipad-device .dialog-body,
.tablet-device .dialog-body {
  max-height: 70vh !important;
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch !important;
  padding-bottom: 20px !important;
  position: relative !important;
  z-index: 5 !important;
}

/*
 * 偏好设置对话框在iPad上的滚动修复
 * 确保偏好设置对话框在iPad上可以正常滚动，防止内容溢出
 */

/* iPad设备上的偏好设置对话框滚动修复 */
.ipad-device .preferences-dialog-content,
.tablet-device .preferences-dialog-content {
  max-height: 85vh !important;
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch !important;
  padding-bottom: 20px !important;
}

/* 对话框内容区域滚动修复 */
.ipad-device .preferences-dialog-content > div,
.tablet-device .preferences-dialog-content > div {
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch !important;
  max-height: 70vh !important;
}

/* 修复颜色选择部分在iPad上的显示 */
.ipad-device .preferences-theme-color-section,
.tablet-device .preferences-theme-color-section {
  flex-wrap: wrap !important;
  gap: 8px !important;
}

/* 修复背景图片上传区域在iPad上的触摸交互 */
.ipad-device .preferences-background-upload,
.tablet-device .preferences-background-upload {
  min-height: 120px !important;
  touch-action: manipulation !important;
}

/* iOS Safari特定修复 */
@supports (-webkit-touch-callout: none) {
  .preferences-dialog-content {
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
    touch-action: pan-y !important;
    overscroll-behavior-y: contain !important;
  }
}