/* 触摸设备交互优化 */

/* 确保触摸目标足够大 */
.touch-target {
  min-width: 44px;
  min-height: 44px;
}

/* 在触摸设备上取消悬停效果 */
@media (hover: none) {
  .hover-only {
    display: none !important;
  }
}

/* 在非触摸设备上隐藏触摸专用元素 */
@media (hover: hover) {
  .touch-only {
    display: none !important;
  }
}

/* 强制触摸优化类 */
.touch-optimized {
  cursor: pointer;
  touch-action: manipulation;
}

/* 交互特定样式 */
.touch-optimized.interactive {
  transition: transform 0.15s ease;
}

.touch-optimized.interactive:active {
  transform: scale(0.98);
}

/* 滚动容器优化 */
.touch-scroll {
  -webkit-overflow-scrolling: touch !important;
  overflow-y: auto;
  overscroll-behavior: contain;
}

/* 禁止iOS上的双击缩放 */
.disable-double-tap-zoom {
  touch-action: manipulation;
}

/* 提高D3和SVG元素的触摸友好度 */
svg {
  touch-action: manipulation;
}

svg circle, 
svg rect, 
svg path, 
svg line,
svg g {
  vector-effect: non-scaling-stroke;
  touch-action: manipulation;
  cursor: pointer;
}

/* 为交互元素增加触摸反馈 */
.interactive-element {
  position: relative;
  cursor: pointer;
}

.interactive-element::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: currentColor;
  opacity: 0;
  transition: opacity 0.2s ease;
  border-radius: inherit;
  pointer-events: none;
}

.interactive-element:active::after {
  opacity: 0.1;
}

/* 自定义拖拽样式 */
.drag-handle {
  cursor: grab;
  touch-action: none;
}

.drag-handle:active {
  cursor: grabbing;
}

/* 提高边缘等细节元素的可触摸性 */
.edge-enhanced {
  stroke-width: 2px;
}

/* 避免太小的文本元素 */
svg text {
  font-size: max(12px, 1em);
  pointer-events: none;
}

/* 特定元素的高亮效果 */
.node-highlight {
  filter: drop-shadow(0 0 4px rgba(59, 130, 246, 0.5));
}

/* 触摸友好的滑块 */
.slider-thumb {
  width: 24px;
  height: 24px;
}

@media (pointer: coarse) {
  .slider-thumb {
    width: 32px;
    height: 32px;
  }
}

/* 平稳的滑动体验 */
.smooth-transition {
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* SVG特定的触摸交互层 */
.svg-interaction-layer {
  fill: transparent;
  stroke: transparent;
  pointer-events: all;
}